const cookies = [
    {
        "domain": ".youtube.com",
        "expirationDate": 1740619437.876667,
        "hostOnly": false,
        "httpOnly": true,
        "name": "VISITOR_PRIVACY_METADATA",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "CgJQSxIEGgAgUA%3D%3D"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1733414518,
        "hostOnly": false,
        "httpOnly": false,
        "name": "_gcl_au",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "1.1.1105463588.1725638518"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.717814,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-3PSID",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "g.a000oQifhvNNaTokPX3vw7P_BjmZOyQc5xqmXyA7EXp9NJtVtHq_V8WWokvH9YYeaeVLf6ln2gACgYKAVASARUSFQHGX2MiSVbSPkQhuggyoA45yKV4GhoVAUF8yKqJjz3oPtToTP_hj6L8s0em0076"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1758445038.109735,
        "hostOnly": false,
        "httpOnly": false,
        "name": "SIDCC",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "AKEyXzVY5eoBIk62IWbIDObo0KhWOGJDjZaX7js0ZFKUzoA89GDAeD7nrCdJx6gXL_63eVdr0g"
    },
    {
        "domain": ".youtube.com",
        "hostOnly": false,
        "httpOnly": true,
        "name": "YSC",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": true,
        "storeId": null,
        "value": "jpMvA9hRufM"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.717282,
        "hostOnly": false,
        "httpOnly": false,
        "name": "SID",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "g.a000oQifhvNNaTokPX3vw7P_BjmZOyQc5xqmXyA7EXp9NJtVtHq_w9wXSnk3lQPekIEx6QE2mQACgYKAT8SARUSFQHGX2MiWUiMwcTCuuZLGcSOcXigYBoVAUF8yKpMmeBszKyVM1xNfxCy7pfy0076"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1758445021.346693,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-1PSIDTS",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "sidts-CjEBQlrA-NhDkmQa9k5d_xbw9XpkKB6bezSyEQoryct0cmi3K2dhGHA0fWllNnR01Np5EAA"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.71868,
        "hostOnly": false,
        "httpOnly": false,
        "name": "SAPISID",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "aCbCQ9YrWe-CVeHC/A0aKkRWMmnlQvShQz"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1758445038.109883,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-1PSIDCC",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "AKEyXzW5TKhmuVCwuAET9umPliRXsPSFNU1osx59kEX6WlvZFo4YK5nQ0D79mgL0haVg5e7HPlk"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.718208,
        "hostOnly": false,
        "httpOnly": true,
        "name": "SSID",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "Aq0c3sB1-f8tdwJMV"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.718797,
        "hostOnly": false,
        "httpOnly": false,
        "name": "__Secure-1PAPISID",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "aCbCQ9YrWe-CVeHC/A0aKkRWMmnlQvShQz"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.717704,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-1PSID",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "g.a000oQifhvNNaTokPX3vw7P_BjmZOyQc5xqmXyA7EXp9NJtVtHq_zJln20xqu0IbVao7925QxwACgYKAc4SARUSFQHGX2MicQS8b78B5dOqNLsaXgPwihoVAUF8yKrFlnTr--uKzNwsx87znYY30076"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.7189,
        "hostOnly": false,
        "httpOnly": false,
        "name": "__Secure-3PAPISID",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "aCbCQ9YrWe-CVeHC/A0aKkRWMmnlQvShQz"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1758445038.109955,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-3PSIDCC",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "AKEyXzWduCCYnhRBZOeGKXr4Nx1MAJm8fM_q6T_Wb7QhBRitGsIoPeWpKNde32TfvOWEMkO6NBU"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1758445021.3469,
        "hostOnly": false,
        "httpOnly": true,
        "name": "__Secure-3PSIDTS",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "sidts-CjEBQlrA-NhDkmQa9k5d_xbw9XpkKB6bezSyEQoryct0cmi3K2dhGHA0fWllNnR01Np5EAA"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1760969484.582328,
        "hostOnly": false,
        "httpOnly": false,
        "name": "_ga",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "GA1.1.911662981.1726409147"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1760969502.791636,
        "hostOnly": false,
        "httpOnly": false,
        "name": "_ga_VCGEPY40VB",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "GS1.1.1726409146.1.1.1726409502.40.0.0"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.718424,
        "hostOnly": false,
        "httpOnly": false,
        "name": "APISID",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "MeMQEpE7PzG4NQnQ/APbsJ8AXhS1Hb3pyc"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761464226.717924,
        "hostOnly": false,
        "httpOnly": true,
        "name": "HSID",
        "path": "/",
        "sameSite": null,
        "secure": false,
        "session": false,
        "storeId": null,
        "value": "Ac92P1K6-UAiMJuxG"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1760969482.60642,
        "hostOnly": false,
        "httpOnly": true,
        "name": "LOGIN_INFO",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "AFmmF2swRAIgCALJKQucKIH6IiJR0XAC2tUL3WU37QzpwZ0zbDtzlQ0CIGqQZ4QcYSV9DJ-IWXFBUA_Itp1_ex9mRoAVMJ1qtx71:QUQ3MjNmeTNGaXpON25xMmZDdW9qVkRHMWVTM1JhMnVvNWhoMzhRbFBITGJVZXBNR3ZCMFpkUU9USHktaHgzT1dydUNhTTBTZWNKOUJ3NVA1V0o2WmZpQ2tKd1RHUTNkclppd2VaaW9kNWxidkxwTmYwa0YyNDdkb0Q3VThUZFZJRGduVG5YMkpLajJydmlEZmg0YUFrZEtkcFRHWkxRNlRn"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1742220350.498699,
        "hostOnly": false,
        "httpOnly": true,
        "name": "NID",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "517=Fh_gRvLRWb6u9vNJXcPUJkoi2w4gN4noeXRr_fHeE7dLeCHMnU7ZSHgfAXwnsJyPAXv93fiL6t3raFhkdl5_kApni4n_MWu5NL_JYc8JS7-v8p40d1HycNFk3UwWW94s5A-g6MWDjdBA-aKqeZBTilwbtWr0g0QDO7agFnw2dlx-X-JDGChO_ei-m61Aji8BtFYHY5HKsU8sc0rdQYA9N2O2JKKUFl5CbcmteStsRnfTj8baPw"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1761466008.680758,
        "hostOnly": false,
        "httpOnly": false,
        "name": "PREF",
        "path": "/",
        "sameSite": null,
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "volume=47&f6=40000080&f7=100&tz=Asia.Karachi&repeat=NONE&autoplay=true&f4=4000000"
    },
    {
        "domain": ".youtube.com",
        "expirationDate": 1740619437.876593,
        "hostOnly": false,
        "httpOnly": true,
        "name": "VISITOR_INFO1_LIVE",
        "path": "/",
        "sameSite": "no_restriction",
        "secure": true,
        "session": false,
        "storeId": null,
        "value": "kuMBp9yZ4WE"
    }
]
import ytdl from '@distube/ytdl-core';
const agent = ytdl.createAgent(cookies);


export const getytUrlDetail = async (req, res) => {
    let { url} = req.query;
   
    if (!url) {
        res.status(400).json({ status: 400, message: 'we need url mf' });
        return;
    }
    try {
        let infoYt = await ytdl.getInfo(url, { agent });
        let details = infoYt.videoDetails
        return res.json({...details,url:'http:localhost:5000/video?url='+url})
    } catch (error) {
        console.error('Error:', error);
        res.status(500).json({ status: 500, message: 'An error occurred', error: error.message || error.msg });
    }
};
